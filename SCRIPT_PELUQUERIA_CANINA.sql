CREATE DATABASE PELUQUERIA_CANINA;
USE PELUQUERIA_CANINA;
CREATE TABLE DUENO(
DNI INT(8) NOT NULL UNIQUE,
NOMBRE VARCHAR(50) NOT NULL,
APELLIDO VARCHAR(50) NOT NULL,
TELEFONO VARCHAR(20) NOT NULL,
DIRECCION VARCHAR(60) NOT NULL,
PRIMARY KEY (DNI)
);
CREATE TABLE PERRO(
ID_PERRO INT AUTO_INCREMENT NOT NULL,
NOMBRE_P VARCHAR(20) NOT NULL,
FECHA_NACIM DATE,
SEXO VARCHAR (20) NOT NULL,
DNI_DUENO INT(8),
PRIMARY KEY (ID_PERRO),
CONSTRAINT FK_DNI_DUENO FOREIGN KEY (DNI_DUENO) REFERENCES DUENO (DNI)
);
CREATE TABLE HISTORIAL(
ID_HISTORIAL INT AUTO_INCREMENT NOT NULL,
FECHA DATE,
PERRO_ID INT,
DESCRIPCION VARCHAR(100),
MONTO DECIMAL NOT NULL DEFAULT '0' NOT NULL,
PRIMARY KEY (ID_HISTORIAL),
CONSTRAINT FK_ID_HISTORIAL FOREIGN KEY(PERRO_ID) REFERENCES PERRO (ID_PERRO)
);

/*CARGA DE 5 REGISTROS A LA TABLA DUENO*/

INSERT INTO DUENO VALUES
(39006671,'MARIA', 'DOMINGUEZ','3876748122','PELLEGRINI 1381' ),
(27890563,'MARCOS', 'GIMENEZ','3876589765','URQUIZA 1235' ),
(31987540,'JOSE', 'LOPEZ','3874318765','AV BICENTENARIO 312' ),
(41987562,'ROMINA', 'CARRIZO','3875090871','JOSE MARMOL 416' ),
(35900812,'EMILIANO', 'CORDOBA','3874932567','CECILIO RODRIGUEZ 751' );

/*CARGA DE 5 REGISTROS A LA TABLA PERRO*/

INSERT INTO PERRO VALUES
(1,'CONAN', '2017-09-02','MACHO',27890563 ),
(2,'BOB', '2020-08-10','MACHO',31987540 ),
(3,'VALENTINA', '2017-12-14','HEMBRA',41987562 ),
(4,'LOLA', '2019-09-23','HEMBRA',35900812 ),
(5,'MALVADO', '2015-07-11','MACHO',35900812 );

/*CARGA DE 5 REGISTROS A LA TABLA HISTORIAL*/

INSERT INTO HISTORIAL VALUES 
(1, '2021/03/12', '1', 'CORTE Y LAVADO', '2500'),
(2, '2021/08/07', '4', 'LAVADO', '1500'),
(3, '2022/01/22', '1', 'CORTE Y DESPULGADO', '3000'),
(4, '2022/04/15', '5', 'CORTE', '2000'),
(5, '2022/07/16', '2', 'CORTE DE UNAS Y LAVADO', '2500');


/*EJERCICIO 10 (Vaciar la tabla historial y resetear el contador del campo ID)*/

TRUNCATE HISTORIAL

/*EJERCICIO 12 (Obtener todos los perros de sexo “Macho” nacidos entre 2020 y 2022)*/

SELECT * FROM PERRO WHERE FECHA_NACIM BETWEEN '2020-01-01' AND '2022-12-31'
